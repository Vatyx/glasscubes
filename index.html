<html>
  <head>
    <title>First</title>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>
  </head>
  <body>    
    <script src="http://threejs.org/build/three.min.js"></script> 
    
    <script>

    var scene, camera, renderer;
    var geometry, material, mesh;
    var group;

    var numOfLines = 7;
    var lines = [];
    var boxes = [];

    var length = 100;
    var counter = 60;

    init();
    animate();

    function init() {

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 500);
        camera.position.set(0, 0, 100);
        camera.lookAt(new THREE.Vector3(0, 0, 0));
        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        document.body.appendChild( renderer.domElement );

        var pointLight = new THREE.PointLight(0xFFFFFF);

		// set its position
		pointLight.position.x = 10;
		pointLight.position.y = 50;
		pointLight.position.z = 130;

		// add to the scene
		scene.add(pointLight);

        var top = 30;

        for(var i = 0; i < numOfLines; i++)
        {
        	line = {};
        	line.color = Math.random() * 0xffffff;
        	line.vert = top - 10*i;
        	line.interval = Math.floor(Math.random() * (80 - 30 + 1)) + 30;

        	var geometry = new THREE.Geometry();
        	geometry.vertices.push(new THREE.Vector3(-length, line.vert, 0));
    		geometry.vertices.push(new THREE.Vector3(length, line.vert, 0));

    		var material = new THREE.LineBasicMaterial({
        		color: line.color
        	});


        	var l = new THREE.Line(geometry, material);
        	scene.add(l);
        	line.body = l;

        	lines.push(line);
        }
    } 

    function animate() {

        requestAnimationFrame( animate );

        if(true)
        {
        	for(var i = 0; i < numOfLines; i++)
	        {

	        	if(counter % lines[i].interval == 0)
	        	{
	        		var cgeometry = new THREE.BoxGeometry( 3, 3, 3);
					var material = new THREE.MeshPhongMaterial( { color: lines[i].color, specular: 0x050505,
    shininess: 100 } );
					var mesh = new THREE.Mesh( cgeometry, material );
					var group = new THREE.Object3D();
					group.add( mesh );
					group.position.set(-length, lines[i].vert, 0);
					scene.add(group);

					boxes.push(group);
	        	}
	        }
        }

        boxes.forEach(function(box)
        {
        	box.translateX(.75);
        	if(box.position.x >= length - 1)
        	{
        		scene.remove(box);
        	}
        });

   		counter++;
        renderer.render( scene, camera );

    }
    </script>
  </body>
</html>